<a name="microsoft-common-fileupload"></a>
# Microsoft.Common.FileUpload
* [Microsoft.Common.FileUpload](#microsoft-common-fileupload)
    * [Description](#microsoft-common-fileupload-description)
    * [Guidance](#microsoft-common-fileupload-guidance)
        * [A Note about URLs](#microsoft-common-fileupload-guidance-a-note-about-urls)
    * [Definitions:](#microsoft-common-fileupload-definitions)
    * [UI Sample](#microsoft-common-fileupload-ui-sample)
    * [Sample Snippet](#microsoft-common-fileupload-sample-snippet)

<a name="microsoft-common-fileupload-description"></a>
## Description
A control that allows a user to specify one or more files to upload.
<a name="microsoft-common-fileupload-guidance"></a>
## Guidance
If `options.multiple` is **false** and `options.uploadMode` is **file**, then the output has the contents of the file as a JSON string:

```json
"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."
```

If `options.multiple` is **true** and `options.uploadMode` is **file**, then the output has the contents of the files as a JSON array:

```json
[
  "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",
  "Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",
  "Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.",
  "Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."
]
```

If `options.multiple` is **false** and `options.uploadMode` is **url**, then the output has a URL as a JSON string:

```json
"https://myaccount.blob.core.windows.net/pictures/"
```

If `options.multiple` is **true** and `options.uploadMode` is **url**, then the output has a list of URLs as a JSON array:

```json
[
  "https://myaccount.blob.core.windows.net/pictures/",
  "https://myaccount.blob.core.windows.net/pictures/",
  "https://myaccount.blob.core.windows.net/pictures/"
]
```

This behavior can be summarized by the following table:

| **Value of `options.multiple`** | **Value of `options.uploadMode`** | **Output**                         |
|:-------------------------------:|:---------------------------------:|:----------------------------------:|
| false                           | file                              | File contents as a **JSON string** |
| true                            | file                              | File contents as a **JSON array**  |
| false                           | url                               | URL as a **JSON string**           |
| true                            | url                               | List of URLs as a **JSON array**   |

<a name="microsoft-common-fileupload-guidance-a-note-about-urls"></a>
### A Note about URLs

When testing a CreateUiDefinition, some browsers (like Google Chrome) truncate URLs generated by the `Microsoft.Common.FileUpload` element in the browser console. You may need to right-click individual links to copy the full URLs.

<a name="microsoft-common-fileupload-definitions"></a>
## Definitions:
<a name="microsoft-common-fileupload-definitions-an-object-with-the-following-properties"></a>
##### An object with the following properties
| Name | Required | Description
| ---|:--:|:--:|
|name|True|The name of the instance
|type|True|Enum permitting the value: "Microsoft.Common.FileUpload"
|label|True|Display text for the control
|toolTip|False|Text to display when hovering over the tooltip icon. Tooltip icon will only be displayed if text is a non-empty value.
|constraints|False|The constraints object has two properties: <code>required</code> and <code>accept</code>. <br><br>1) If <code>constraints.required</code> is set to **true**, then file upload becomes required and a red asterisk is displayed next to the control's text in order to signal to users that they cannot proceed unless a file is uploaded. If this property is set to **false**, file upload is not required.<br><br>2) <code>constraints.accept</code> specifies the types of files that are shown in the browser's file dialog. See the [HTML5 specification](https://html.spec.whatwg.org/multipage/input.html#attr-input-accept) for allowed values. The default value is **null**.
|options|False|The options object has four properties: <code>multiple</code>, <code>uploadMode</code>, <code>openMode</code>, and <code>encoding</code>. <br><br>1) If <code>options.multiple</code> is set to **true**, the user is allowed to select more than one file in the browser's file dialog. The default value is **false**. <br><br>2) This element supports uploading files in two modes based on the value of <code>options.uploadMode</code>. If **file** is specified, the output has the contents of the file as a blob. If **url** is specified, then the file is uploaded to a temporary location, and the output has the URL of the blob. Temporary blobs will be purged after 24 hours. The default value is **file**.<br>Note: An uploaded file is protected. The output URL includes a [SAS token](https://docs.microsoft.com/en-us/azure/storage/common/storage-sas-overview?toc=/azure/storage/blobs/toc.json) for accessing the file during deployment. <br><br>3) The value of <code>options.openMode</code> determines how the file is read. If the file is expected to be plain text, specify **text**; else, specify **binary**. The default value is **text**. <br>If <code>options.uploadMode</code> is set to **file** and <code>options.openMode</code> is set to **binary**, the output is base64-encoded. <br><br>4) <code>options.encoding</code> specifies the encoding to use when reading the file. The default value is **UTF-8**, and is used only when <code>options.openMode</code> is set to **text**.
|scope|True|
|visible|False|If **true** the control will display, otherwise it will be hidden.
|fx.feature|False|
<a name="microsoft-common-fileupload-ui-sample"></a>
## UI Sample
![alt-text](../media/dx/controls/dx-control-Microsoft.Common.FileUpload.png "UI sample of a FileUpload control")  
<a name="microsoft-common-fileupload-sample-snippet"></a>
## Sample Snippet
How to specify a FileUpload
```json

{
"name": "element1",
"type": "Microsoft.Common.FileUpload",
"label": "Some file upload",
"toolTip": "",
"constraints": {
    "required": true,
    "accept": ".doc,.docx,.xml,application/msword"
},
"options": {
    "multiple": false,
    "uploadMode": "file",
    "openMode": "text",
    "encoding": "UTF-8"
},
"visible": true
}

```
